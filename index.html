<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Memory Card Game</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    background: #f0f0f0;
    color: #333;
  }
  h1 { margin-top: 20px; }
  .controls {
    margin: 10px 0; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;
  }
  .controls label { display: flex; flex-direction: column; font-size: 0.9rem; }
  .game-info { margin: 10px 0; }
  .grid {
    display: grid;
    grid-gap: 10px;
    margin: 20px 0;
  }
  .card {
    background: #fff;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    user-select: none;
    transition: transform 0.3s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }
  .card.flipped {
    background: #4caf50;
    color: #fff;
    transform: rotateY(180deg);
  }
</style>
</head>
<body>

<h1>Dynamic Memory Card Game</h1>

<div class="controls">
  <label>Min Number: <input type="number" id="minNum" value="0"></label>
  <label>Max Number: <input type="number" id="maxNum" value="50"></label>
  <label>Grid Size:
    <select id="gridSize">
      <option value="4">4x4</option>
      <option value="6">6x6</option>
      <option value="8">8x8</option>
    </select>
  </label>
  <button id="startBtn">Start Game</button>
</div>

<div class="game-info">
  Score: <span id="score">0</span> | Time: <span id="timer">0</span>s
</div>

<div class="grid" id="grid"></div>

<script>
const grid = document.getElementById('grid');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const startBtn = document.getElementById('startBtn');
const minInput = document.getElementById('minNum');
const maxInput = document.getElementById('maxNum');
const gridSelect = document.getElementById('gridSize');

let cardsArray = [];
let flippedCards = [];
let score = 0;
let time = 0;
let timer;

// Shuffle array
function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

// Timer
function startTimer() {
  time = 0;
  timerEl.textContent = time;
  timer = setInterval(() => {
    time++;
    timerEl.textContent = time;
  }, 1000);
}

// Create number pairs dynamically based on grid size
function createNumberArray(min, max, gridSize) {
  const totalCards = gridSize * gridSize;
  const totalPairs = totalCards / 2;
  const numbers = [];
  const range = Math.min(max - min + 1, totalPairs);

  for(let i = 0; i < range; i++){
    numbers.push(min + i, min + i); // duplicate for pairs
  }

  // Fill remaining pairs if needed
  while(numbers.length < totalCards){
    const randomNum = Math.floor(Math.random() * (max - min + 1)) + parseInt(min);
    if(numbers.filter(n => n === randomNum).length < 2) numbers.push(randomNum, randomNum);
  }

  return numbers;
}

// Create the grid dynamically
function createGrid(min, max, gridSize) {
  grid.innerHTML = '';
  grid.style.gridTemplateColumns = `repeat(${gridSize}, 80px)`;
  cardsArray = createNumberArray(min, max, gridSize);
  const shuffled = shuffle(cardsArray);

  shuffled.forEach(number => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.number = number;
    card.style.width = '80px';
    card.style.height = '80px';
    card.addEventListener('click', flipCard);
    grid.appendChild(card);
  });
}

// Flip card
function flipCard() {
  if(this.classList.contains('flipped') || flippedCards.length === 2) return;
  this.classList.add('flipped');
  this.textContent = this.dataset.number;
  flippedCards.push(this);

  if(flippedCards.length === 2) checkMatch();
}

// Check for match
function checkMatch() {
  const [first, second] = flippedCards;
  if(first.dataset.number === second.dataset.number) {
    score++;
    scoreEl.textContent = score;
    flippedCards = [];
    if(score === cardsArray.length/2) {
      clearInterval(timer);
      alert(`You win! Time: ${time}s`);
    }
  } else {
    setTimeout(() => {
      first.classList.remove('flipped'); first.textContent = '';
      second.classList.remove('flipped'); second.textContent = '';
      flippedCards = [];
    }, 800);
  }
}

// Start game button
startBtn.addEventListener('click', () => {
  score = 0;
  scoreEl.textContent = score;
  clearInterval(timer);
  const min = parseInt(minInput.value);
  const max = parseInt(maxInput.value);
  const gridSize = parseInt(gridSelect.value);
  createGrid(min, max, gridSize);
  startTimer();
});

// Initialize default game
createGrid(parseInt(minInput.value), parseInt(maxInput.value), parseInt(gridSelect.value));
startTimer();
</script>

</body>
</html>
